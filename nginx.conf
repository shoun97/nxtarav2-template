user  nginx;
worker_processes  auto;

error_log  /var/log/nginx/error.log warn;
#log_format upstream_time '$remote_addr - $remote_user [$time_local] '
#                             '"$request" $status $body_bytes_sent '
#                             '"$http_referer" "$http_user_agent"'
#                             'rt=$request_time uct="$upstream_connect_time" uht="$upstream_header_time" urt="$upstream_response_time"';

#access_log /var/log/nginx-access.log upstream_time;

pid        /var/run/nginx.pid;

events {
    worker_connections  1024; 
}

http {
	charset UTF-8;
	
	upstream upstream_olimpo_reactive_back {
		server olimporeactive_api:8080;
	} 

	
	upstream upstream_olimpo_web_auth {
		server web_api:8080;
	} 


	upstream upstream_olimpo_web {
		server olimpo_web:8080;
	}

	upstream upstream_ssl_olimpo_web {
		server olimpo_web:8080;
	}

	upstream upstream_ssl_ilis_nxtara_dev_nxtara_web {
		server ilis_nxtara_dev_nxtara_web:8080;
	}	

	#upstream upstream_esb {
	#	server esb-engine:8080;
	#} 
	
	#upstream upstream_dte_rest_api {
	# 	server 172.16.22.102:8081;
	#}
	
	upstream upstream_olimpo_rest_api {
	 	server olimpo_rest_api:8080;
	}

	upstream upstream_olimpo_rest_act_api {
	 	server olimpo_rest_act_api:8080;
	}

	upstream upstream_webpay_back {
		server webpay_api:8080;
	} 

	# SITE Y RECURSOS CONTRATOS AURUSJOYERIA
	upstream upstream_contratos_aurus_web {
		server extension_aurus_web:8080;
	}

	upstream upstream_ssl_contratos_aurus_web {
		server extension_aurus_web:8080;
	}

	# SITE Y FARALLONESHOLDING
	upstream upstream_farallones_web {
		server farallones_web:8080;
	}

	upstream upstream_ssl_farallones_web {
		server farallones_web:8080;
	}

	# API FARALLONESHOLDING
	upstream upstream_farallones_api {
		server farallones_api:8080;
	}

	upstream upstream_ssl_farallones_api {
		server farallones_api:8080;
	}


	# SITE Y RECURSOS ILISPLACES MVP
	upstream upstream_ilis_places_mvp_web {
		server ilis_places_mvp_web:8080;
	}

	upstream upstream_ssl_ilis_places_mvp_web {
		server ilis_places_mvp_web:8080;
	}

	# API ILISPLACES MVP
	upstream upstream_ilis_places_mvp_api {
		server ilis_places_mvp_api:8080;
	}

	upstream upstream_ssl_ilis_places_mvp_api {
		server ilis_places_mvp_api:8080;
	}

	# SITE Y RECURSOS ILISPLACES QA
	upstream upstream_ilis_places_web {
		server ilis_places_web:8080;
	}

	upstream upstream_ssl_ilis_places_web {
		server ilis_places_web:8080;
	}

	# API ILISPLACES QA
	upstream upstream_ilis_places_api {
		server ilis_places_api:8080;
	}

	upstream upstream_ssl_ilis_places_api {
		server ilis_places_api:8080;
	}

	#REPOSITORIO DE IMAGENES GENREAL ILISSOLUTIONS
	upstream upstream_ilis_resources_web {
		server ilis_resources_web:8080;
	}

	upstream upstream_ssl_ilis_resources_web {
		server ilis_resources_web:8080;
	}

	#DEV CLIENTE SQUADRABRETTI
	upstream upstream_ilis_squadrabretti_dev_web {
		server ilis_squadrabretti_dev_web:8080;
	}

	upstream upstream_ssl_ilis_squadrabretti_dev_web {
		server ilis_squadrabretti_dev_web:8080;
	}

	#DEV API CLIENTE SQUADRABRETTI
	upstream upstream_ilis_squadrabretti_dev_api {
		server ilis_squadrabretti_dev_api:8080;
	}

	upstream upstream_ssl_ilis_squadrabretti_dev_api {
		server ilis_squadrabretti_dev_api:8080;
	}

	#API CLIENTE SQUADRABRETTI
	upstream upstream_ilis_squadrabretti_api {
		server ilis_squadrabretti_api:8080;
	}

	upstream upstream_ssl_ilis_squadrabretti_api {
		server ilis_squadrabretti_api:8080;
	}

	#WEB CLIENTE SQUADRABRETTI
	upstream upstream_ilis_squadrabretti_web {
		server ilis_squadrabretti_web:8080;
	}

	upstream upstream_ssl_ilis_squadrabretti_web {
		server ilis_squadrabretti_web:8080;
	}

	#WEB CLIENTE TABAQUERIA SYM
	upstream upstream_ilis_tabaqueriasym_web {
		server ilis_tabaqueriasym_web:8080;
	}

	upstream upstream_ssl_ilis_tabaqueriasym_web {
		server ilis_tabaqueriasym_web:8080;
	}

	#API CLIENTE TABAQUERIA SYM
	upstream upstream_ilis_tabaqueriasym_api {
		server ilis_tabaqueriasym_api:8080;
	}

	upstream upstream_ssl_ilis_tabaqueriasym_api {
		server ilis_tabaqueriasym_api:8080;
	}

	#WEB DEV CLIENTE TABAQUERIA SYM
	upstream upstream_ilis_tabaqueriasym_dev_web {
		server ilis_tabaqueriasym_dev_web:8080;
	}

	upstream upstream_ssl_ilis_tabaqueriasym_dev_web {
		server ilis_tabaqueriasym_dev_web:8080;
	}

	#API DEV CLIENTE TABAQUERIA SYM
	upstream upstream_ilis_tabaqueriasym_dev_api {
		server ilis_tabaqueriasym_dev_api:8080;
	}

	upstream upstream_ssl_ilis_tabaqueriasym_dev_api {
		server ilis_tabaqueriasym_dev_api:8080;
	}

	#WEB CLIENTE TIMANTTI
	upstream upstream_ilis_timantti_web {
		server ilis_timantti_web:8080;
	}

	upstream upstream_ssl_ilis_timantti_web {
		server ilis_timantti_web:8080;
	}

	#API CLIENTE TIMANTTI
	upstream upstream_ilis_timantti_api {
		server ilis_timantti_api:8080;
	}

	upstream upstream_ssl_ilis_timantti_api {
		server ilis_timantti_api:8080;
	}

	#WEB DEV CLIENTE TIMANTTI
	upstream upstream_ilis_timantti_dev_web {
		server ilis_timantti_dev_web:8080;
	}

	upstream upstream_ssl_ilis_timantti_dev_web {
		server ilis_timantti_dev_web:8080;
	}

	#API DEV CLIENTE TIMANTTI
	upstream upstream_ilis_timantti_dev_api {
		server ilis_timantti_dev_api:8080;
	}

	upstream upstream_ssl_ilis_timantti_dev_api {
		server ilis_timantti_dev_api:8080;
	}

	#API DEVOLIMPO CLIENTE TIMANTTI
	upstream upstream_apiresttimantti_app {
		server timanttirest:3001;
	}

	upstream upstream_ssl_apiresttimantti_app {
		server timanttirest:3001;
	}

	#WEB CLIENTE ILISPLACES_COMERCIAL
	upstream upstream_ilisplaces_comercial_web {
		server ilisplaces_comercial_web:8080;
	}

	upstream upstream_ssl_ilisplaces_comercial_web {
		server ilisplaces_comercial_web:8080;
	}

	
	log_format api_main '$remote_addr - [$time_local] "$request" '
                    '$status $body_bytes_sent "$http_referer" "$http_user_agent" '
                    '"$api_name"';

	access_log /var/log/nginx/access.log api_main;
	error_log /var/log/nginx/error.log;  

	#################### FARALLONES LANDING PAGE ####################
	##### FARALLONES SITE Y RECURSOS - TOMCAT NEXT ##### 
	server { 
		listen 8080; 
		server_name www.farallonesholding.cl farallonesholding.cl; 

		proxy_set_header Host $http_host; 
		proxy_set_header X-Forwarded-Host $http_host;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; ##OJO
		port_in_redirect on;
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120; 
		
		proxy_buffering off;
		proxy_request_buffering off;

		location ~* \.(?:css|js|jpg|png)$ { 
			add_header Cache-Control "public, max-age=120, s-maxage=120";
		}  

		location ^~ / {  
			set $api_name "Nginx http -> Tomcat Farallones Holding http"; 
			set $upstream upstream_farallones_web;
			proxy_pass http://$upstream$request_uri; 
		} 
	} 

	server {
		listen 8443 ssl;

			server_name www.farallonesholding.cl farallonesholding.cl; 

			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			proxy_set_header Host $http_host;
			proxy_set_header X-Forwarded-Proto https;
			proxy_set_header X-Real-IP $remote_addr; ##OJO
			proxy_set_header X-NginX-Proxy true; ##OJO

			proxy_redirect off; 
			
			proxy_read_timeout 600;
			proxy_connect_timeout 600;
			proxy_send_timeout 600; 
			send_timeout 600;

			proxy_buffering off;
			proxy_request_buffering off;
			
			ssl_certificate    /etc/ssl/ssl_certificate.pem; 
			ssl_certificate_key    /etc/ssl/ssl_certificate_key.key; 

			location ^~ / {  
				set $api_name "Tomcat Farallones Holding https -> http"; 
				set $upstream upstream_farallones_web;
				proxy_pass http://$upstream$request_uri; 
			} 
	} 

	##### FARALLONES API - SPRINGBOOT  ##### 
	server { 
		listen 8080; 
		server_name www.api.farallonesholding.cl api.farallonesholding.cl; 

		proxy_set_header Host $http_host; 
		proxy_set_header X-Forwarded-Host $http_host;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; ##OJO
		port_in_redirect on;
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120; 
		
		proxy_buffering off;
   		proxy_request_buffering off;

		location ~* \.(?:css|js|jpg|png)$ { 
  			add_header Cache-Control "public, max-age=120, s-maxage=120";
		}  

		location ^~ / {  
		 	set $api_name "Nginx http -> OpenJava21 Farallones Holding http"; 
		 	set $upstream upstream_farallones_api;
			proxy_pass http://$upstream$request_uri; 
		} 
	} 

	server {
		listen 8443 ssl;

		server_name www.api.farallonesholding.cl api.farallonesholding.cl; 

		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header Host $http_host;
		proxy_set_header X-Forwarded-Proto https;
		proxy_set_header X-Real-IP $remote_addr; ##OJO
		proxy_set_header X-NginX-Proxy true; ##OJO

	 	proxy_redirect off; 
		
		proxy_read_timeout 600;
		proxy_connect_timeout 600;
		proxy_send_timeout 600; 
		send_timeout 600;

		proxy_buffering off;
   		proxy_request_buffering off;
		
		ssl_certificate    /etc/ssl/ssl_certificate.pem; 
		ssl_certificate_key    /etc/ssl/ssl_certificate_key.key; 

		location ^~ / {  
		 	set $api_name "OpenJava21 Farallones Holding https -> http"; 
		 	set $upstream upstream_farallones_api;
			proxy_pass http://$upstream$request_uri;
		} 
	}

	#################### OLIMPO WEB ####################
	server {
		listen 8080 default_server; 
		server_name dev.olimpoweb.cl 186.67.170.162 172.16.1.235; 

		proxy_set_header Host $http_host; 
		proxy_set_header X-Forwarded-Host $http_host;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; ##OJO
		port_in_redirect on;
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120; 
		
		proxy_buffering off;
   		proxy_request_buffering off;

		location ~* \.(?:css|js|jpg|png)$ { 
  			add_header Cache-Control "no-cache, no-store, must-revalidate";
			add_header Pragma "no-cache";
			add_header Expires "0";
		}

		#location ^~ /esb/api/v1/ {		
		# 	set $api_name "OlimpoWeb ESB"; 
		# 	set $upstream upstream_esb;
		# 	proxy_pass http://$upstream$request_uri; 
		#}

		#location ^~ /DteRestAPI/ {		
		# 	set $api_name "DteRestAPI"; 
		# 	set $upstream upstream_dte_rest_api;
		# 	proxy_pass http://$upstream$request_uri; 
		#} 		
		
		location ^~ /OlimpoRestAPI/ {  
  			#add_header Cache-Control "no-cache, no-store, must-revalidate";
			#add_header Pragma "no-cache";
			#add_header Expires "0";

		 	set $api_name "OlimpoRestAPI";
		 	set $upstream upstream_olimpo_rest_api;
		 	proxy_pass http://$upstream$request_uri; 
		}

		location ^~ /OlimpoRestApiAct/ {  
  			add_header Cache-Control "no-cache, no-store, must-revalidate";
			add_header Pragma "no-cache";
			add_header Expires "0";

		 	set $api_name "OlimpoRestApiAct";
		 	set $upstream upstream_olimpo_rest_act_api;
		 	proxy_pass http://$upstream$request_uri; 
		} 


    	# Aumentar buffers para encabezados largos
    	large_client_header_buffers 4 128k;

		# Opcional: Aumentar otros limites si es necesario
    	client_header_buffer_size 128k;
    	client_max_body_size 10M; # Si el problema es con el tamano del cuerpo		

		location ^~ ajax=true { 
  			#add_header Cache-Control "no-cache, no-store, must-revalidate";
			#add_header Pragma "no-cache";
			#add_header Expires "0";

		 	set $api_name "OlimpoWeb ajax";
		 	set $upstream upstream_olimpo_web;
		 	proxy_pass http://$upstream$request_uri; 
		} 

		#location ^~ /testing/ { 
		# 	set $api_name "OlimpoWeb testing";
		# 	set $upstream upstream_testing;
		# 	proxy_pass http://$upstream$request_uri; 
		#} 
		
		#location ^~ /reactive/ { 
		# 	set $api_name "OlimpoWeb Reactive-Front";
		# 	set $upstream upstream_olimpo_reactive_front;	
		#	return 301 https://$server_name:443$request_uri;
		#}
		
		location ^~ /api/v2/ { 
		 	set $api_name "OlimpoWeb Reactive-Back";
			set $upstream upstream_olimpo_reactive_back;
			return 301 https://$server_name:443$request_uri; 
		} 

		location ^~ /api/v3/ { 
		 	set $api_name "OlimpoWeb Auth";
			set $upstream upstream_olimpo_web_auth;
			return 301 https://$server_name:443$request_uri; 
		} 

		location ^~ / {  
		 	set $api_name "OlimpoWeb"; 
		 	set $upstream upstream_olimpo_web;
			return 301 https://$server_name:443$request_uri;
		} 
	} 

	server {
		listen 8443 default_server ssl;

		server_name dev.olimpoweb.cl 186.67.170.162 172.16.1.235; 

		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header Host $http_host;
		proxy_set_header X-Forwarded-Proto https;
		proxy_set_header X-Real-IP $remote_addr; ##OJO
		proxy_set_header X-NginX-Proxy true; ##OJO

	 	proxy_redirect off; 
		
		proxy_read_timeout 600;
		proxy_connect_timeout 600;
		proxy_send_timeout 600; 
		send_timeout 600;

		proxy_buffering off;
   		proxy_request_buffering off;
		
		ssl_certificate    /etc/ssl/ssl_certificate.pem; 
		ssl_certificate_key    /etc/ssl/ssl_certificate_key.key; 

		location ~* \.(?:css|js|jpg|png)$ { 
  			add_header Cache-Control "public, max-age=120, s-maxage=120";
		}

		#location ~* \.(?:css|js|jpg|png)$ { 
  		#	add_header Cache-Control "no-cache, no-store, must-revalidate";
		#	add_header Pragma "no-cache";
		#	add_header Expires "0";
		#}

		location ^~ ajax=true { 
		 	set $api_name "OlimpoWeb ajax";
		 	set $upstream upstream_olimpo_web;
		 	proxy_pass http://$upstream$request_uri; 
		}
		
		#location ^~ /reactive/ { 
		#	set $api_name "OlimpoWeb Reactive-Front nginx https -> tomcat http 8";
		#	set $upstream upstream_olimpo_reactive_front;
		#	proxy_pass http://$upstream$request_uri; 
		#}
		
		location ^~ /api/v2/ { 
			set $api_name "OlimpoWeb Reactive-Back nginx https -> springboot jdk-1.8";
			set $upstream upstream_olimpo_reactive_back;
			proxy_pass http://$upstream$request_uri; 
		} 
		
		location ^~ /api/v3/ { 
			set $api_name "OlimpoWeb Reactive-Back nginx https -> springboot jdk-1.8";
			set $upstream upstream_olimpo_web_auth;
			proxy_pass http://$upstream$request_uri; 
		} 

		location ^~ /OlimpoRestAPI/ { 
			set $api_name "OlimpoRestAPI nginx https -> tomcat http 8";
			set $upstream upstream_olimpo_rest_api;
			proxy_pass http://$upstream$request_uri; 
		} 

		# Aumentar buffers para encabezados largos
    	large_client_header_buffers 4 128k;

    	# Opcional: Aumentar otros limites si es necesario
    	client_header_buffer_size 128k;
    	client_max_body_size 10M; # Si el problema es con el tamano del cuerpo		

		location ^~ /OlimpoRestApiAct/ { 
			set $api_name "OlimpoRestActAPI nginx https -> tomcat http 8";
			set $upstream upstream_olimpo_rest_act_api;
			proxy_pass http://$upstream$request_uri; 
		} 

		#location ^~ /DteRestAPI/ {
		#	set $api_name "DteRestAPI nginx https -> aurusservicios http";
		#	set $upstream upstream_dte_rest_api;
		#	proxy_pass http://$upstream$request_uri; 
		#}
    
		location ^~ / { 
			set $api_name "OlimpoWeb nginx https -> tomcat http 8";
			set $upstream upstream_olimpo_web;
			proxy_pass http://$upstream$request_uri; 
		} 
	} 


	##### CONTRATOS AURUSJOYERIA SITE Y RECURSOS - TOMCAT WEB #####
 	server { 
		listen 8080; 
		server_name contratosqa.ilissolutions.cl; 

		proxy_set_header Host $http_host; 
		proxy_set_header X-Forwarded-Host $http_host;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; ##OJO
		port_in_redirect on;
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120; 
		
		proxy_buffering off;
   		proxy_request_buffering off;

		location ~* \.(?:css|js|jpg|png)$ { 
  			add_header Cache-Control "public, max-age=120, s-maxage=120";
		}  

		location ^~ / {  
		 	set $api_name "Nginx http -> Tomcat Contratos Aurus http"; 
		 	set $upstream upstream_contratos_aurus_web;
			proxy_pass http://$upstream$request_uri; 
		} 

		location ^~ /api/ { 
			set $api_name "Contratos Webpay-Back";
			set $upstream upstream_webpay_back;
			proxy_pass http://$upstream$request_uri;
		} 
	} 

	server {
		listen 8443 ssl;
	
		server_name contratosqa.ilissolutions.cl; 

		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header Host $http_host;
		proxy_set_header X-Forwarded-Proto https;
		proxy_set_header X-Real-IP $remote_addr; ##OJO
		proxy_set_header X-NginX-Proxy true; ##OJO

		proxy_redirect off; 
		
		proxy_read_timeout 600;
		proxy_connect_timeout 600;
		proxy_send_timeout 600; 
		send_timeout 600;

		proxy_buffering off;
   		proxy_request_buffering off;
		
		ssl_certificate    /etc/ssl/ssl_certificate.pem; 
		ssl_certificate_key    /etc/ssl/ssl_certificate_key.key; 

		location ^~ / {  
		 	set $api_name "Tomcat Contratos Aurus https -> http"; 
		 	set $upstream upstream_contratos_aurus_web;
			proxy_pass http://$upstream$request_uri; 
		} 

		location ^~ /api/ { 
		 	set $api_name "Contratos Webpay-Back nginx https -> springboot OpenJava21";
			set $upstream upstream_webpay_back;
			proxy_pass http://$upstream$request_uri; 
		} 
	} 

	##### SUBDOMINIO PARA RECURSOS ILISSOLUTIONS - TOMCAT #####
	server { 
		listen 8080; 
		server_name resources.ilissolutions.cl www.resources.ilissolutions.cl;

		add_header 'Access-Control-Allow-Origin' '*' always;
		add_header 'Access-Control-Allow-Credentials' 'true' always;
		add_header 'Access-Control-Allow-Methods' 'GET' always;
		add_header 'Access-Control-Allow-Headers' '*' always; 

		proxy_set_header Host $http_host; 
		proxy_set_header X-Forwarded-Host $http_host;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; ##OJO
		port_in_redirect on;
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120; 
		
		proxy_buffering off;
   		proxy_request_buffering off;

		location ~* \.(?:css|js|jpg|png)$ { 
  			add_header Cache-Control "public, max-age=120, s-maxage=120";
		}  

		location ~* \.pdf$ {
			add_header Content-Type application/pdf;
			add_header Content-Disposition inline;
		}

		location ^~ / {  
		 	set $api_name "Nginx http -> Resources Ilissolutions http"; 
		 	set $upstream upstream_ilis_resources_web;
			proxy_pass http://$upstream$request_uri; 
		} 
	} 

	server {
		listen 8443 ssl;

		server_name resources.ilissolutions.cl www.resources.ilissolutions.cl; 

		add_header 'Access-Control-Allow-Origin' '*' always;
		add_header 'Access-Control-Allow-Credentials' 'true' always;
		add_header 'Access-Control-Allow-Methods' 'GET' always;
		add_header 'Access-Control-Allow-Headers' '*' always; 

		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header Host $http_host;
		proxy_set_header X-Forwarded-Proto https;
		proxy_set_header X-Real-IP $remote_addr; ##OJO
		proxy_set_header X-NginX-Proxy true; ##OJO

	 	proxy_redirect off; 
		
		proxy_read_timeout 600;
		proxy_connect_timeout 600;
		proxy_send_timeout 600; 
		send_timeout 600;

		proxy_buffering off;
   		proxy_request_buffering off;
		
		ssl_certificate    /etc/ssl/ssl_certificate.pem; 
		ssl_certificate_key    /etc/ssl/ssl_certificate_key.key; 

		location ^~ / {  
		 	set $api_name "Tomcat Resources Ilissolutions https -> http"; 
		 	set $upstream upstream_ilis_resources_web;
			proxy_pass http://$upstream$request_uri; 
		} 
	} 

	#################### ILISSOLUTIONS ILISPLACES ####################

	##### ILIS PLACES API - SPRING BOOT #####
	server { 
		listen 8080; 
		server_name api.ilissolutions.cl; 

		proxy_set_header Host $http_host; 
		proxy_set_header X-Forwarded-Host $http_host;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; ##OJO
		port_in_redirect on;
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120; 
		
		proxy_buffering off;
   		proxy_request_buffering off;

		location ~* \.(?:css|js|jpg|png)$ { 
  			add_header Cache-Control "public, max-age=120, s-maxage=120";
		}  

		location ^~ / {  
		 	set $api_name "Nginx http -> OpenJava21 SpringBoot Ilis Places MVP http"; 
		 	set $upstream upstream_ilis_places_mvp_api;
			proxy_pass http://$upstream$request_uri; 
		} 
	} 

	server {
		listen 8443 ssl;

		server_name api.ilissolutions.cl; 

		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header Host $http_host;
		proxy_set_header X-Forwarded-Proto https;
		proxy_set_header X-Real-IP $remote_addr; ##OJO
		proxy_set_header X-NginX-Proxy true; ##OJO

	 	proxy_redirect off; 
		
		proxy_read_timeout 600;
		proxy_connect_timeout 600;
		proxy_send_timeout 600; 
		send_timeout 600;

		proxy_buffering off;
   		proxy_request_buffering off;
		
		ssl_certificate    /etc/ssl/ssl_certificate.pem; 
		ssl_certificate_key    /etc/ssl/ssl_certificate_key.key; 

		location ^~ / {  
		 	set $api_name "OpenJava21 SpringBoot Ilis Places MVP https -> http"; 
		 	set $upstream upstream_ilis_places_mvp_api;
			proxy_pass http://$upstream$request_uri;
		} 
	}

	##### ILIS PLACES SITE Y RECURSOS - TOMCAT REACT ##### 
	server { 
		listen 8080; 
		server_name ilisplaces.ilissolutions.cl; 

		proxy_set_header Host $http_host; 
		proxy_set_header X-Forwarded-Host $http_host;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; ##OJO
		port_in_redirect on;
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120;

		client_max_body_size 50M; 
		
		proxy_buffering off;
   		proxy_request_buffering off;

		location ~* \.(?:css|js|jpg|png)$ { 
  			add_header Cache-Control "public, max-age=120, s-maxage=120";
		}  

		location ^~ / {  
		 	set $api_name "Nginx http -> Tomcat Ilis Places MVP http"; 
		 	set $upstream upstream_ilis_places_mvp_web;
			proxy_pass http://$upstream$request_uri; 
		} 
	} 

	server {
		listen 8443 ssl;

		server_name ilisplaces.ilissolutions.cl; 

		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header Host $http_host;
		proxy_set_header X-Forwarded-Proto https;
		proxy_set_header X-Real-IP $remote_addr; ##OJO
		proxy_set_header X-NginX-Proxy true; ##OJO

	 	proxy_redirect off; 
		
		proxy_read_timeout 600;
		proxy_connect_timeout 600;
		proxy_send_timeout 600; 
		send_timeout 600;

		client_max_body_size 50M;

		proxy_buffering off;
   		proxy_request_buffering off;
		
		ssl_certificate    /etc/ssl/ssl_certificate.pem; 
		ssl_certificate_key    /etc/ssl/ssl_certificate_key.key; 

		location ^~ / {  
		 	set $api_name "Tomcat Ilis Places MVP https -> http"; 
		 	set $upstream upstream_ilis_places_mvp_web;
			proxy_pass http://$upstream$request_uri; 
		} 
	} 

	#################### ILISSOLUTIONS QA ILISPLACES ####################
	##### QA ILIS PLACES API - SPRING BOOT #####
	server { 
		listen 8080; 
		server_name qaapi.ilissolutions.cl; 

		proxy_set_header Host $http_host; 
		proxy_set_header X-Forwarded-Host $http_host;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; ##OJO
		port_in_redirect on;
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120;
		client_max_body_size 50M; 
		
		proxy_buffering off;
   		proxy_request_buffering off;

		location ~* \.(?:css|js|jpg|png)$ { 
  			add_header Cache-Control "public, max-age=120, s-maxage=120";
		}  

		location ^~ / {  
		 	set $api_name "Nginx http -> OpenJava21 SpringBoot Ilis Places QA http"; 
		 	set $upstream upstream_ilis_places_api;
			proxy_pass http://$upstream$request_uri; 
		} 
	} 

	server {
		listen 8443 ssl;

		server_name qaapi.ilissolutions.cl; 

		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header Host $http_host;
		proxy_set_header X-Forwarded-Proto https;
		proxy_set_header X-Real-IP $remote_addr; ##OJO
		proxy_set_header X-NginX-Proxy true; ##OJO

	 	proxy_redirect off; 
		
		proxy_read_timeout 600;
		proxy_connect_timeout 600;
		proxy_send_timeout 600; 
		send_timeout 600;
		client_max_body_size 50M;

		proxy_buffering off;
   		proxy_request_buffering off;
		
		ssl_certificate    /etc/ssl/ssl_certificate.pem; 
		ssl_certificate_key    /etc/ssl/ssl_certificate_key.key; 

		location ^~ / {  
		 	set $api_name "OpenJava21 SpringBoot Ilis Places QA https -> http"; 
		 	set $upstream upstream_ilis_places_api;
			proxy_pass http://$upstream$request_uri;
		} 
	}

	##### QA LIS PLACES SITE Y RECURSOS - TOMCAT REACT ##### 
	server { 
		listen 8080; 
		server_name qailisplaces.ilissolutions.cl; 

		proxy_set_header Host $http_host; 
		proxy_set_header X-Forwarded-Host $http_host;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; ##OJO
		port_in_redirect on;
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120;
		client_max_body_size 50M;
		
		proxy_buffering off;
   		proxy_request_buffering off;

		location ~* \.(?:css|js|jpg|png)$ { 
  			add_header Cache-Control "public, max-age=120, s-maxage=120";
		}  

		location ^~ / {  
		 	set $api_name "Nginx http -> Tomcat Ilis Places QA http"; 
		 	set $upstream upstream_ilis_places_web;
			proxy_pass http://$upstream$request_uri; 
		} 
	} 

	server {
		listen 8443 ssl;

		server_name qailisplaces.ilissolutions.cl; 

		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header Host $http_host;
		proxy_set_header X-Forwarded-Proto https;
		proxy_set_header X-Real-IP $remote_addr; ##OJO
		proxy_set_header X-NginX-Proxy true; ##OJO

	 	proxy_redirect off; 
		
		proxy_read_timeout 600;
		proxy_connect_timeout 600;
		proxy_send_timeout 600; 
		send_timeout 600;
		client_max_body_size 50M;

		proxy_buffering off;
   		proxy_request_buffering off;
		
		ssl_certificate    /etc/ssl/ssl_certificate.pem; 
		ssl_certificate_key    /etc/ssl/ssl_certificate_key.key; 

		location ^~ / {  
		 	set $api_name "Tomcat Ilis Places QA https -> http"; 
		 	set $upstream upstream_ilis_places_web;
			proxy_pass http://$upstream$request_uri; 
		} 
	}

	##### QA ILIS PLACES SITE Y RECURSOS - NEXT ##### 
	server { 
		listen 8080; 
		server_name next.ilissolutions.cl; 

		proxy_set_header Host $http_host; 
		proxy_set_header X-Forwarded-Host $http_host;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; ##OJO
		port_in_redirect on;
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120;
		client_max_body_size 50M; 
		
		proxy_buffering off;
		proxy_request_buffering off;

		location ~* \.(?:css|js|jpg|png)$ { 
			add_header Cache-Control "public, max-age=120, s-maxage=120";
		}  

		location ^~ / {  
			set $api_name "Nginx http -> Next Ilis Places QA http"; 
			# Apuntar a la IP y puerto correctos
			proxy_pass http://172.16.1.235:8013$request_uri; 
		} 
	} 

	server {
		listen 8443 ssl;
		server_name next.ilissolutions.cl;

		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header Host $http_host;
		proxy_set_header X-Forwarded-Proto https;
		proxy_set_header X-Real-IP $remote_addr; ##OJO
		proxy_set_header X-NginX-Proxy true; ##OJO

		proxy_redirect off; 
		
		proxy_read_timeout 600;
		proxy_connect_timeout 600;
		proxy_send_timeout 600; 
		send_timeout 600;
		client_max_body_size 50M;

		proxy_buffering off;
		proxy_request_buffering off;
		
		ssl_certificate    /etc/ssl/ssl_certificate.pem; 
		ssl_certificate_key    /etc/ssl/ssl_certificate_key.key; 

		location ^~ / {  
			set $api_name "Next Ilis Places https -> http"; 
			# Apuntar a la IP y puerto correctos
			proxy_pass http://172.16.1.235:8013$request_uri; 
		} 
	}


	################### SQUADRABRETTI ####################

	#### API SQUADRABRETTI - SPRING BOOT #####
	server { 
		listen 8080; 
		server_name api.squadrabretti.cl; 

		proxy_set_header Host $http_host; 
		proxy_set_header X-Forwarded-Host $http_host;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; ##OJO
		port_in_redirect on;
		http2 off;
    	proxy_hide_header Upgrade;
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120;
		client_max_body_size 50M; 
		
		proxy_buffering off;
   		proxy_request_buffering off;

		location ~* \.(?:css|js|jpg|png)$ { 
  			add_header Cache-Control "public, max-age=120, s-maxage=120";
		}  

		location ^~ / {  
		 	set $api_name "Nginx http -> OpenJava21 SpringBoot SquadraBretti http"; 
		 	set $upstream upstream_ilis_squadrabretti_api;
			proxy_pass http://$upstream$request_uri; 
		} 
	} 

	server {
		listen 8443 ssl;

		server_name api.squadrabretti.cl; 

		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header Host $http_host;
		proxy_set_header X-Forwarded-Proto https;
		proxy_set_header X-Real-IP $remote_addr; ##OJO
		proxy_set_header X-NginX-Proxy true; ##OJO
		http2 off;
    	proxy_hide_header Upgrade;

	 	proxy_redirect off; 
		
		proxy_read_timeout 600;
		proxy_connect_timeout 600;
		proxy_send_timeout 600; 
		send_timeout 600;
		client_max_body_size 50M;

		proxy_buffering off;
   		proxy_request_buffering off;
		
		ssl_certificate    /etc/ssl/ssl_certificate.pem; 
		ssl_certificate_key    /etc/ssl/ssl_certificate_key.key; 

		location ^~ / {  
		 	set $api_name "OpenJava21 SpringBoot SquadraBretti https -> http"; 
		 	set $upstream upstream_ilis_squadrabretti_api;
			proxy_pass http://$upstream$request_uri;
		} 
	}

	

	##### SQUADRABRETTI WEB CLIENTE - TOMCAT REACT ##### 
	server { 
		listen 8080; 
		server_name squadrabretti.cl www.squadrabretti.cl; 

		proxy_set_header Host $http_host; 
		proxy_set_header X-Forwarded-Host $http_host;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; ##OJO
		port_in_redirect on;

		http2 off;
    	proxy_hide_header Upgrade;
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120;
		client_max_body_size 50M; 
		
		proxy_buffering off;
   		proxy_request_buffering off;

		location ~* \.(?:css|js|jpg|png)$ { 
  			add_header Cache-Control "public, max-age=120, s-maxage=120";
		}  

		location ^~ / {  
		 	set $api_name "Nginx http -> Tomcat Squadrabretti web  http"; 
		 	set $upstream upstream_ilis_squadrabretti_web;
			proxy_pass http://$upstream$request_uri; 
		} 
	}

	server {
		listen 8443 ssl;
		server_name squadrabretti.cl www.squadrabretti.cl; 

		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header Host $http_host;
		proxy_set_header X-Forwarded-Proto https;
		proxy_set_header X-Real-IP $remote_addr; ##OJO
		proxy_set_header X-NginX-Proxy true; ##OJO

		http2 off;
    	proxy_hide_header Upgrade;

	 	proxy_redirect off; 
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120; 
		send_timeout 120;
		client_max_body_size 50M;

		proxy_buffering off;
   		proxy_request_buffering off;
		
		ssl_certificate    /etc/ssl/ssl_certificate.pem; 
		ssl_certificate_key    /etc/ssl/ssl_certificate_key.key; 

		location ^~ / {  
		 	set $api_name "Tomcat Squadrabretti web https -> http"; 
		 	set $upstream upstream_ilis_squadrabretti_web;
			proxy_pass http://$upstream$request_uri; 
		} 
	}

	##### DEV SQUADRABRETTI SITE Y RECURSOS - TOMCAT REACT ##### 
	server { 
		listen 8080; 
		server_name dev.squadrabretti.cl; 

		proxy_set_header Host $http_host; 
		proxy_set_header X-Forwarded-Host $http_host;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; ##OJO
		port_in_redirect on;
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120;
		client_max_body_size 50M; 
		
		proxy_buffering off;
   		proxy_request_buffering off;

		location ~* \.(?:css|js|jpg|png)$ { 
  			add_header Cache-Control "public, max-age=120, s-maxage=120";
		}  

		location ^~ / {  
		 	set $api_name "Nginx http -> Tomcat Dev SquadraBretti http"; 
		 	set $upstream upstream_ilis_squadrabretti_dev_web;
			proxy_pass http://$upstream$request_uri; 
		} 
	} 

	server {
		listen 8443 ssl;

		server_name dev.squadrabretti.cl; 

		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header Host $http_host;
		proxy_set_header X-Forwarded-Proto https;
		proxy_set_header X-Real-IP $remote_addr; ##OJO
		proxy_set_header X-NginX-Proxy true; ##OJO

	 	proxy_redirect off; 
		
		proxy_read_timeout 600;
		proxy_connect_timeout 600;
		proxy_send_timeout 600; 
		send_timeout 600;
		client_max_body_size 50M;

		proxy_buffering off;
   		proxy_request_buffering off;
		
		ssl_certificate    /etc/ssl/ssl_certificate.pem; 
		ssl_certificate_key    /etc/ssl/ssl_certificate_key.key; 

		location ^~ / {  
		 	set $api_name "Tomcat Dev SquadraBretti https -> http"; 
		 	set $upstream upstream_ilis_squadrabretti_dev_web;
			proxy_pass http://$upstream$request_uri; 
		} 
	}

	##### DEV API SQUADRABRETTI  ##### 
	server { 
		listen 8080; 
		server_name devapi.squadrabretti.cl; 

		proxy_set_header Host $http_host; 
		proxy_set_header X-Forwarded-Host $http_host;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; ##OJO
		port_in_redirect on;
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120;
		client_max_body_size 50M; 
		
		proxy_buffering off;
   		proxy_request_buffering off;

		location ~* \.(?:css|js|jpg|png)$ { 
  			add_header Cache-Control "public, max-age=120, s-maxage=120";
		}  

		location ^~ / {  
		 	set $api_name "Nginx http -> OpenJava21 SpringBoot SquadraBretti http"; 
		 	set $upstream upstream_ilis_squadrabretti_dev_api;
			proxy_pass http://$upstream$request_uri; 
		} 
	} 

	server {
		listen 8443 ssl;

		server_name devapi.squadrabretti.cl; 

		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header Host $http_host;
		proxy_set_header X-Forwarded-Proto https;
		proxy_set_header X-Real-IP $remote_addr; ##OJO
		proxy_set_header X-NginX-Proxy true; ##OJO

	 	proxy_redirect off; 
		
		proxy_read_timeout 600;
		proxy_connect_timeout 600;
		proxy_send_timeout 600; 
		send_timeout 600;
		client_max_body_size 50M;

		proxy_buffering off;
   		proxy_request_buffering off;
		
		ssl_certificate    /etc/ssl/ssl_certificate.pem; 
		ssl_certificate_key    /etc/ssl/ssl_certificate_key.key; 

		location ^~ / {  
		 	set $api_name "OpenJava21 SpringBoot SquadraBretti https -> http"; 
		 	set $upstream upstream_ilis_squadrabretti_dev_api;
			proxy_pass http://$upstream$request_uri;
		} 
	}

	

	##### TABAQUERIA SYM WEB CLIENTE - TOMCAT REACT ##### 
	server { 
		listen 8080; 
		server_name tabaqueriasym.cl www.tabaqueriasym.cl; 

		proxy_set_header Host $http_host; 
		proxy_set_header X-Forwarded-Host $http_host;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; ##OJO
		port_in_redirect on;
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120; 
		
		proxy_buffering off;
   		proxy_request_buffering off;

		location ~* \.(?:css|js|jpg|png)$ { 
  			add_header Cache-Control "public, max-age=120, s-maxage=120";
		}  

		location ^~ / {  
		 	set $api_name "Nginx http -> Tomcat TabaqueriaSyM web  http"; 
		 	set $upstream upstream_ilis_tabaqueriasym_web;
			proxy_pass http://$upstream$request_uri; 
		} 
	}

	server {
		listen 8443 ssl;
		server_name tabaqueriasym.cl www.tabaqueriasym.cl; 

		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header Host $http_host;
		proxy_set_header X-Forwarded-Proto https;
		proxy_set_header X-Real-IP $remote_addr; ##OJO
		proxy_set_header X-NginX-Proxy true; ##OJO

	 	proxy_redirect off; 
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120; 
		send_timeout 120;

		proxy_buffering off;
   		proxy_request_buffering off;
		
		ssl_certificate    /etc/ssl/ssl_certificate.pem; 
		ssl_certificate_key    /etc/ssl/ssl_certificate_key.key; 

		location ^~ / {  
		 	set $api_name "Tomcat TabaqueriaSyM web https -> http"; 
		 	set $upstream upstream_ilis_tabaqueriasym_web;
			proxy_pass http://$upstream$request_uri; 
		} 
	}

	#####  API TABAQUERIASYM   ##### 
	server { 
		listen 8080; 
		server_name api.tabaqueriasym.cl; 

		proxy_set_header Host $http_host; 
		proxy_set_header X-Forwarded-Host $http_host;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; ##OJO
		port_in_redirect on;
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120; 
		
		proxy_buffering off;
   		proxy_request_buffering off;

		location ~* \.(?:css|js|jpg|png)$ { 
  			add_header Cache-Control "public, max-age=120, s-maxage=120";
		}  

		location ^~ / {  
		 	set $api_name "Nginx http -> OpenJava21 SpringBoot SquadraBretti http"; 
		 	set $upstream upstream_ilis_tabaqueriasym_api;
			proxy_pass http://$upstream$request_uri; 
		} 
	} 

	server {
		listen 8443 ssl;

		server_name api.tabaqueriasym.cl; 

		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header Host $http_host;
		proxy_set_header X-Forwarded-Proto https;
		proxy_set_header X-Real-IP $remote_addr; ##OJO
		proxy_set_header X-NginX-Proxy true; ##OJO

	 	proxy_redirect off; 
		
		proxy_read_timeout 600;
		proxy_connect_timeout 600;
		proxy_send_timeout 600; 
		send_timeout 600;

		proxy_buffering off;
   		proxy_request_buffering off;
		
		ssl_certificate    /etc/ssl/ssl_certificate.pem; 
		ssl_certificate_key    /etc/ssl/ssl_certificate_key.key; 

		location ^~ / {  
		 	set $api_name "OpenJava21 SpringBoot SquadraBretti https -> http"; 
		 	set $upstream upstream_ilis_tabaqueriasym_api;
			proxy_pass http://$upstream$request_uri;
		} 
	}


	##### TABAQUERIA SYM WEB DEV CLIENTE - TOMCAT REACT ##### 
	server { 
		listen 8080; 
		server_name dev.tabaqueriasym.cl; 

		proxy_set_header Host $http_host; 
		proxy_set_header X-Forwarded-Host $http_host;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; ##OJO
		port_in_redirect on;
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120;
		client_max_body_size 50M; 
		
		proxy_buffering off;
   		proxy_request_buffering off;

		location ~* \.(?:css|js|jpg|png)$ { 
  			add_header Cache-Control "public, max-age=120, s-maxage=120";
		}  

		location ^~ / {  
		 	set $api_name "Nginx http -> Tomcat TabaqueriaSyM web  http"; 
		 	set $upstream upstream_ilis_tabaqueriasym_dev_web;
			proxy_pass http://$upstream$request_uri; 
		} 
	}

	server {
		listen 8443 ssl;
		server_name dev.tabaqueriasym.cl; 

		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header Host $http_host;
		proxy_set_header X-Forwarded-Proto https;
		proxy_set_header X-Real-IP $remote_addr; ##OJO
		proxy_set_header X-NginX-Proxy true; ##OJO

	 	proxy_redirect off; 
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120; 
		send_timeout 120;
		client_max_body_size 50M;

		proxy_buffering off;
   		proxy_request_buffering off;
		
		ssl_certificate    /etc/ssl/ssl_certificate.pem; 
		ssl_certificate_key    /etc/ssl/ssl_certificate_key.key; 

		location ^~ / {  
		 	set $api_name "Tomcat TabaqueriaSyM web https -> http"; 
		 	set $upstream upstream_ilis_tabaqueriasym_dev_web;
			proxy_pass http://$upstream$request_uri; 
		} 
	}

	#####  APIDEV TABAQUERIASYM   ##### 
	server { 
		listen 8080; 
		server_name devapi.tabaqueriasym.cl; 

		proxy_set_header Host $http_host; 
		proxy_set_header X-Forwarded-Host $http_host;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; ##OJO
		port_in_redirect on;
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120;
		client_max_body_size 50M; 
		
		proxy_buffering off;
   		proxy_request_buffering off;

		location ~* \.(?:css|js|jpg|png)$ { 
  			add_header Cache-Control "public, max-age=120, s-maxage=120";
		}  

		location ^~ / {  
		 	set $api_name "Nginx http -> OpenJava21 SpringBoot SquadraBretti http"; 
		 	set $upstream upstream_ilis_tabaqueriasym_dev_api;
			proxy_pass http://$upstream$request_uri; 
		} 
	} 

	server {
		listen 8443 ssl;

		server_name devapi.tabaqueriasym.cl; 

		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header Host $http_host;
		proxy_set_header X-Forwarded-Proto https;
		proxy_set_header X-Real-IP $remote_addr; ##OJO
		proxy_set_header X-NginX-Proxy true; ##OJO

	 	proxy_redirect off; 
		
		proxy_read_timeout 600;
		proxy_connect_timeout 600;
		proxy_send_timeout 600; 
		send_timeout 600;
		client_max_body_size 50M;

		proxy_buffering off;
   		proxy_request_buffering off;
		
		ssl_certificate    /etc/ssl/ssl_certificate.pem; 
		ssl_certificate_key    /etc/ssl/ssl_certificate_key.key; 

		location ^~ / {  
		 	set $api_name "OpenJava21 SpringBoot SquadraBretti https -> http"; 
		 	set $upstream upstream_ilis_tabaqueriasym_dev_api;
			proxy_pass http://$upstream$request_uri;
		} 
	}


	################### TIMANTTI ####################

	#### API TIMANTTI - SPRING BOOT #####
	server { 
		listen 8080; 
		server_name api.timantti.cl; 

		proxy_set_header Host $http_host; 
		proxy_set_header X-Forwarded-Host $http_host;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; ##OJO
		port_in_redirect on;
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120;
		client_max_body_size 50M; 
		
		proxy_buffering off;
   		proxy_request_buffering off;

		location ~* \.(?:css|js|jpg|png)$ { 
  			add_header Cache-Control "public, max-age=120, s-maxage=120";
		}  

		location ^~ / {  
		 	set $api_name "Nginx http -> OpenJava21 SpringBoot Timantti http"; 
		 	set $upstream upstream_ilis_timantti_api;
			proxy_pass http://$upstream$request_uri; 
		} 
	} 

	server {
		listen 8443 ssl;

		server_name api.timantti.cl; 

		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header Host $http_host;
		proxy_set_header X-Forwarded-Proto https;
		proxy_set_header X-Real-IP $remote_addr; ##OJO
		proxy_set_header X-NginX-Proxy true; ##OJO

	 	proxy_redirect off; 
		
		proxy_read_timeout 600;
		proxy_connect_timeout 600;
		proxy_send_timeout 600; 
		send_timeout 600;
		client_max_body_size 50M;

		proxy_buffering off;
   		proxy_request_buffering off;
		
		ssl_certificate    /etc/ssl/ssl_certificate.pem; 
		ssl_certificate_key    /etc/ssl/ssl_certificate_key.key; 

		location ^~ / {  
		 	set $api_name "OpenJava21 SpringBoot Timantti https -> http"; 
		 	set $upstream upstream_ilis_timantti_api;
			proxy_pass http://$upstream$request_uri;
		} 
	}

	

	##### TIMANTTI WEB CLIENTE - TOMCAT REACT ##### 
	server { 
		listen 8080; 
		server_name timantti.cl www.timantti.cl; 

		proxy_set_header Host $http_host; 
		proxy_set_header X-Forwarded-Host $http_host;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; ##OJO
		port_in_redirect on;
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120;
		client_max_body_size 50M; 
		
		proxy_buffering off;
   		proxy_request_buffering off;

		location ~* \.(?:css|js|jpg|png)$ { 
  			add_header Cache-Control "public, max-age=120, s-maxage=120";
		}  

		location ^~ / {  
		 	set $api_name "Nginx http -> Tomcat timantti web  http"; 
		 	set $upstream upstream_ilis_timantti_web;
			proxy_pass http://$upstream$request_uri; 
		} 
	}

	server {
		listen 8443 ssl;
		server_name timantti.cl www.timantti.cl; 

		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header Host $http_host;
		proxy_set_header X-Forwarded-Proto https;
		proxy_set_header X-Real-IP $remote_addr; ##OJO
		proxy_set_header X-NginX-Proxy true; ##OJO

	 	proxy_redirect off; 
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120; 
		send_timeout 120;
		client_max_body_size 50M;

		proxy_buffering off;
   		proxy_request_buffering off;
		
		ssl_certificate    /etc/ssl/ssl_certificate.pem; 
		ssl_certificate_key    /etc/ssl/ssl_certificate_key.key; 

		location ^~ / {  
		 	set $api_name "Tomcat Timantti web https -> http"; 
		 	set $upstream upstream_ilis_timantti_web;
			proxy_pass http://$upstream$request_uri; 
		} 
	}

	##### DEV TIMANTTI SITE Y RECURSOS - TOMCAT REACT ##### 
	server { 
		listen 8080; 
		server_name dev.timantti.cl; 

		proxy_set_header Host $http_host; 
		proxy_set_header X-Forwarded-Host $http_host;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; ##OJO
		port_in_redirect on;
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120;
		client_max_body_size 50M; 
		
		proxy_buffering off;
   		proxy_request_buffering off;

		location ~* \.(?:css|js|jpg|png)$ { 
  			add_header Cache-Control "public, max-age=120, s-maxage=120";
		}  

		location ^~ / {  
		 	set $api_name "Nginx http -> Tomcat Dev Timantti http"; 
		 	set $upstream upstream_ilis_timantti_dev_web;
			proxy_pass http://$upstream$request_uri; 
		} 
	} 

	server {
		listen 8443 ssl;

		server_name dev.timantti.cl; 

		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header Host $http_host;
		proxy_set_header X-Forwarded-Proto https;
		proxy_set_header X-Real-IP $remote_addr; ##OJO
		proxy_set_header X-NginX-Proxy true; ##OJO

	 	proxy_redirect off; 
		
		proxy_read_timeout 600;
		proxy_connect_timeout 600;
		proxy_send_timeout 600; 
		send_timeout 600;
		client_max_body_size 50M;

		proxy_buffering off;
   		proxy_request_buffering off;
		
		ssl_certificate    /etc/ssl/ssl_certificate.pem; 
		ssl_certificate_key    /etc/ssl/ssl_certificate_key.key; 

		location ^~ / {  
		 	set $api_name "Tomcat Dev Timantti https -> http"; 
		 	set $upstream upstream_ilis_timantti_dev_web;
			proxy_pass http://$upstream$request_uri; 
		} 
	}

	##### DEV API TIMANTTI  ##### 
	server { 
		listen 8080; 
		server_name devapi.timantti.cl; 

		proxy_set_header Host $http_host; 
		proxy_set_header X-Forwarded-Host $http_host;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; ##OJO
		port_in_redirect on;
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120;
		client_max_body_size 50M; 
		
		proxy_buffering off;
   		proxy_request_buffering off;

		location ~* \.(?:css|js|jpg|png)$ { 
  			add_header Cache-Control "public, max-age=120, s-maxage=120";
		}  

		location ^~ / {  
		 	set $api_name "Nginx http -> OpenJava21 SpringBoot Timantti http"; 
		 	set $upstream upstream_ilis_timantti_dev_api;
			proxy_pass http://$upstream$request_uri; 
		} 
	} 

	server {
		listen 8443 ssl;

		server_name devapi.timantti.cl; 

		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header Host $http_host;
		proxy_set_header X-Forwarded-Proto https;
		proxy_set_header X-Real-IP $remote_addr; ##OJO
		proxy_set_header X-NginX-Proxy true; ##OJO

	 	proxy_redirect off; 
		
		proxy_read_timeout 600;
		proxy_connect_timeout 600;
		proxy_send_timeout 600; 
		send_timeout 600;
		client_max_body_size 50M;

		proxy_buffering off;
   		proxy_request_buffering off;
		
		ssl_certificate    /etc/ssl/ssl_certificate.pem; 
		ssl_certificate_key    /etc/ssl/ssl_certificate_key.key; 

		location ^~ / {  
		 	set $api_name "OpenJava21 SpringBoot Timantti https -> http"; 
		 	set $upstream upstream_ilis_timantti_dev_api;
			proxy_pass http://$upstream$request_uri;
		} 
	}

		##### DEV APIOLIMPO TIMANTTI  ##### 
	server { 
		listen 8080; 
		server_name devapiolimpo.timantti.cl; 

		proxy_set_header Host $http_host; 
		proxy_set_header X-Forwarded-Host $http_host;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; ##OJO
		port_in_redirect on;
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120; 
		
		proxy_buffering off;
   		proxy_request_buffering off;

		location ~* \.(?:css|js|jpg|png)$ { 
  			add_header Cache-Control "public, max-age=120, s-maxage=120";
		}  

		location ^~ / {  
		 	set $api_name "Nginx http -> OpenJava21 SpringBoot TimanttiOlimpo http"; 
		 	set $upstream upstream_apiresttimantti_app;
			proxy_pass http://$upstream$request_uri;
			#proxy_pass http://timanttirest:3001; 
		} 
	} 

	server {
		listen 8443 ssl;

		server_name devapiolimpo.timantti.cl; 

		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header Host $http_host;
		proxy_set_header X-Forwarded-Proto https;
		proxy_set_header X-Real-IP $remote_addr; ##OJO
		proxy_set_header X-NginX-Proxy true; ##OJO

	 	proxy_redirect off; 
		
		proxy_read_timeout 600;
		proxy_connect_timeout 600;
		proxy_send_timeout 600; 
		send_timeout 600;
		client_max_body_size 50M;

		proxy_buffering off;
   		proxy_request_buffering off;
		
		ssl_certificate    /etc/ssl/ssl_certificate.pem; 
		ssl_certificate_key    /etc/ssl/ssl_certificate_key.key; 

		location ^~ / {  
		 	set $api_name "OpenJava21 SpringBoot TimanttiOlimpo https -> http"; 
		 	set $upstream upstream_apiresttimantti_app;
			proxy_pass http://$upstream$request_uri;
			#proxy_pass http://timanttirest:3001;
		} 
	}


		##### ILISPLACES_COMERCIAL WEB CLIENTE - TOMCAT REACT ##### 
	server { 
		listen 8080; 
		server_name ilisplaces.cl www.ilisplaces.cl; 

		proxy_set_header Host $http_host; 
		proxy_set_header X-Forwarded-Host $http_host;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; ##OJO
		port_in_redirect on;
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120;
		client_max_body_size 50M; 
		
		proxy_buffering off;
   		proxy_request_buffering off;

		location ~* \.(?:css|js|jpg|png)$ { 
  			add_header Cache-Control "public, max-age=120, s-maxage=120";
		}  

		location ^~ / {  
		 	set $api_name "Nginx http -> Tomcat ilisplaces_comercial web  http"; 
		 	set $upstream upstream_ilisplaces_comercial_web;
			proxy_pass http://$upstream$request_uri; 
		} 
	}

	server {
		listen 8443 ssl;
		server_name ilisplaces.cl www.ilisplaces.cl; 

		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header Host $http_host;
		proxy_set_header X-Forwarded-Proto https;
		proxy_set_header X-Real-IP $remote_addr; ##OJO
		proxy_set_header X-NginX-Proxy true; ##OJO

	 	proxy_redirect off; 
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120; 
		send_timeout 120;
		client_max_body_size 50M;

		proxy_buffering off;
   		proxy_request_buffering off;
		
		ssl_certificate    /etc/ssl/ssl_certificate.pem; 
		ssl_certificate_key    /etc/ssl/ssl_certificate_key.key; 

		location ^~ / {  
		 	set $api_name "Tomcat Ilisplaces_comercial web https -> http"; 
		 	set $upstream upstream_ilisplaces_comercial_web;
			proxy_pass http://$upstream$request_uri; 
		} 
	}	

			##### NXTARA WEB CLIENTE - TOMCAT REACT ##### 
	server { 
		listen 8080; 
		server_name dev.nxtara.com www.dev.nxtara.com; 

		proxy_set_header Host $http_host; 
		proxy_set_header X-Forwarded-Host $http_host;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; ##OJO
		port_in_redirect on;
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120;
		client_max_body_size 50M; 
		
		proxy_buffering off;
   		proxy_request_buffering off;

		location ~* \.(?:css|js|jpg|png)$ { 
  			add_header Cache-Control "public, max-age=120, s-maxage=120";
		}  

		location ^~ / {  
		 	set $api_name "Nginx http -> Tomcat Nxtara web  http"; 
		 	set $upstream upstream_ilis_nxtara_dev_nxtara_web;
			proxy_pass http://$upstream$request_uri; 
		} 
	}

	server {
		listen 8443 ssl;
		server_name dev.nxtara.com www.dev.nxtara.com; 

		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header Host $http_host;
		proxy_set_header X-Forwarded-Proto https;
		proxy_set_header X-Real-IP $remote_addr; ##OJO
		proxy_set_header X-NginX-Proxy true; ##OJO

	 	proxy_redirect off; 
		
		proxy_read_timeout 120;
		proxy_connect_timeout 120;
		proxy_send_timeout 120; 
		send_timeout 120;
		client_max_body_size 50M;

		proxy_buffering off;
   		proxy_request_buffering off;
		
		ssl_certificate    /etc/ssl/ssl_certificate.pem; 
		ssl_certificate_key    /etc/ssl/ssl_certificate_key.key; 

		location ^~ / {  
		 	set $api_name "Tomcat Nxtara web https -> http"; 
		 	set $upstream upstream_ilis_nxtara_dev_nxtara_web;
			proxy_pass http://$upstream$request_uri; 
		} 
	}	

}